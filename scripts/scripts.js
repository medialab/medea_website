"use strict";angular.module("driveoutApp.home",[]).config(["$anchorScrollProvider",function(a){a.disableAutoScrolling()}]).controller("HomeCtrl",["$scope","$window","$location","$anchorScroll","$timeout","contentHome","contentIPCC","contentUNFCCC","scrollToStoryLines",function(a,b,c,d,e,f,g,h,i){void 0===i&&(i=!1),d.yOffset=70,""!==c.hash()&&(a.unsubscribeContentListener=a.$on("lastngrepeatdone",function(b){e(function(){d(c.hash()),a.unsubscribeContentListener()})})),a.content=f.data,a.contentStudies={ipcc:g.data,unfccc:h.data},a.$parent.page={},a.anchorScrollTo=function(a){c.hash(a),d()}}]),angular.module("driveoutApp.about",[]).controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("driveoutApp.files",[]).factory("FilesFactory",["$http",function(a){return{get:function(b){return a.get("contents/"+b.path+".json")}}}]).factory("HTMLFactory",["$http",function(a){return{get:function(b){return a.get(b.path)}}}]),angular.module("driveoutApp.layout",[]).controller("LayoutCtrl",["$scope","$route","FilesFactory",function(a,b,c){window.innerHeight>=500&&window.innerWidth>=800?$("#contentBlocker").addClass("displayNone"):($("#contentBlocker").removeClass("displayNone"),$("body").addClass("noScroll")),window.addEventListener("resize",function(){window.innerHeight>=500&&window.innerWidth>=800&&!$("#contentBlocker").hasClass("displayNone")?($("#contentBlocker").addClass("displayNone"),$("body").removeClass("noScroll")):(window.innerHeight<500||window.innerWidth<800)&&$("#contentBlocker").hasClass("displayNone")&&($("#contentBlocker").removeClass("displayNone"),$("body").addClass("noScroll"))}),a.page={},a.pages=[],a.routes=[],c.get({path:"index"}).then(function(b){var c,d;c=b.data.filter(function(a){return"folder"===a.type?a:void 0}),d=b.data.filter(function(a){return"folder"!==a.type?a:void 0}),a.pages=d,a.routes=c}),a.slugify=function(a){return a.toString().toLowerCase().replace(/[\s_]+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}]),angular.module("driveoutApp.page",[]).controller("PageCtrl",["$scope","content","$location","$routeParams",function(a,b,c,d){a.content=b.data;var e=c.path().replace(/\/[^\/]*$/,"");a.content.studyPath=e,a.tab=d.sub||"introduction",a.index=0,a.automatedScroll=!1,a.getCurrentIndex=function(){return a.index},a.getScrollFlag=function(){return a.automatedScroll}}]),angular.module("driveoutApp.singlepage",[]).controller("SinglePageCtrl",["$scope","content",function(a,b){a.content=b.data}]),angular.module("driveoutApp.topmenu",[]).controller("TopMenu",["$scope","$location",function(a,b){b.path().replace(/\/\w*$/,"");a.currentPage=b.path().replace(/^\//,""),a.currentHash=b.hash(),a.isStory=-1!==b.path().replace(/^\//,"").search("/"),a.storySlug=a.isStory?a.currentPage.replace(/\/\w*/,""):""}]),angular.module("driveoutApp.subchapter",[]).controller("SubchapterCtrl",["$scope",function(a){var b=12/a.content.menu.length;a.isEven=12%a.content.menu.length===0;var c={smSize:b,mdSize:b,lgSize:b};if(a.basicBtStpClass="col-sm-"+c.smSize+" col-md-"+c.mdSize+" col-lg-"+c.lgSize,!a.isEven){var d={index:a.content.menu.length/2+1,mdSize:b+1,lgSize:b+1};a.middleBtpClass="col-sm-"+d.smSize+" col-md-"+d.mdSize+" col-lg-"+d.lgSize}}]),angular.module("driveoutApp.content",["ui.bootstrap"]).controller("contentCtrl",["$window","$scope","$element","$attrs","$analytics",function(a,b,c,d,e){var f=angular.element(a);b.index=0,b.height=f.height()-265,b.automatedScroll=!1,b.$watch("index",function(c){"string"==typeof c&&(b.index=+c),b.steer(c),b.$broadcast("updateView",c),e.eventTrack("updateView",{category:"viewChanged",label:a.location.hash+"_"+c})}),b.getScrollFlag=function(){return b.automatedScroll},b.bringTextTo=function(a){b.automatedScroll=!0;var d=c,e=d.find(".slider");void 0!==d.find("#chapter_"+a)[0]&&e.scrollTop(d.find("#chapter_"+a)[0].offsetTop-e[0].offsetTop)},b.next=function(a){var c=b.index+1;b.index=Math.min(c,b.$parent.content.sections.length-1),a||b.bringTextTo(b.index)},b.previous=function(a){var c=b.index-1;b.index=Math.max(c,0),a||b.bringTextTo(b.index)},b.getCurrentIndex=function(){return b.index},b.steer=function(a){a>=0&&a<b.$parent.content.sections.length&&b.$parent.content.sections[b.index]&&(b.section=b.$parent.content.sections[b.index])},f.on("resize",function(){b.height=f.height()-265,b.$apply()}),b.steer(0)}]),angular.module("driveoutApp.404",[]).controller("404Ctrl",["$scope",function(a){}]),angular.module("driveoutApp.depth",[]).controller("DepthCtrl",["$scope","items","parents","$routeParams",function(a,b,c,d){a.items=b.data,a.$parent.folders=angular.copy(c.data).filter(function(a){return"folder"==a.type?a:void 0}),a.$watch("routes",function(){a.$parent.page=angular.copy(a.routes).filter(function(a){return a.slug==d.page}).pop()})}]),angular.module("driveoutApp.directives",["driveoutApp.directives.bricks","driveoutApp.directives.brickswmo","driveoutApp.directives.donut","driveoutApp.directives.enb","driveoutApp.directives.focus","driveoutApp.directives.image","driveoutApp.directives.peoplelines","driveoutApp.directives.diversityacrossar","driveoutApp.directives.diversitybetweenwgs","driveoutApp.directives.wenn","driveoutApp.directives.partcountrybridgenonbridge","driveoutApp.directives.partratehisto","driveoutApp.directives.partratehistototal","driveoutApp.directives.roledistribstacked","driveoutApp.directives.subchapters","driveoutApp.directives.topmenu","driveoutApp.directives.footer","driveoutApp.directives.zeppelin","driveoutApp.directives.partcountry9010","driveoutApp.directives.roleevolutiondiversity","driveoutApp.directives.diversityacrossroles","driveoutApp.directives.section","driveoutApp.directives.pdf","driveoutApp.directives.stackedwgsbyar","driveoutApp.directives.stackedwgsbyarcountryvstotal","driveoutApp.directives.stackedwgsbyarcavsnonca","driveoutApp.directives.lastngrepeat","driveoutApp.directives.gexfinstitutions","driveoutApp.directives.unfccctablefive","driveoutApp.directives.unfccctablefour","driveoutApp.directives.unfccctrajectoriesadaptation","driveoutApp.directives.treemap","driveoutApp.directives.animatedlink","driveoutApp.directives.gexfarthree"]),angular.module("driveoutApp.directives.donut",[]).directive("donut",function(){return{template:"<div></div>",restrict:"EA",link:function(a,b,c){b.text("this is the donut directive")}}}),angular.module("driveoutApp.directives.pdf",[]).directive("pdf",["$timeout","$http",function(a,b){return{restrict:"EA",scope:{url:"@",ratio:"="},link:function(b,c,d){var e=b.url;a(function(){function d(a){$("#pdf").width()*p<$("#pdf").height()-$(".vizLegendZone").height()?$("#containerPdfConclusion").css({position:"absolute",height:$("#pdf").width()*p-30+"px",width:"100%","margin-left":"0px",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"30px"}):$("#containerPdfConclusion").css({width:"70%",height:"",bottom:"",position:"","margin-left":"15%"}),k=!0,$("#containerPdfConclusion").css({visibility:"hidden"}),i.getPage(a).then(function(a){var b=a.getViewport(m);n.height=b.height,n.width=b.width;var c={canvasContext:o,viewport:b},e=a.render(c);e.promise.then(function(){k=!1,null!==l&&(d(l),l=null),$("#containerPdfConclusion").css({visibility:"inherit"})})}),document.getElementById("page_numPDF").textContent=j}function f(a){k?l=a:d(a)}function g(){1>=j||(j--,f(j))}function h(){j>=i.numPages||(j++,f(j))}var i=null,j=1,k=!1,l=null,m=.8,n=document.getElementById("containerPdfConclusion"),o=n.getContext("2d");document.getElementById("nextPDF").addEventListener("click",h),document.getElementById("prevPDF").addEventListener("click",g);var p=b.ratio;PDFJS.getDocument(e).then(function(b){i=b,document.getElementById("page_countPDF").textContent=b.numPages,a(function(){d(j)})}),window.addEventListener("resize",function(){0!==c.height()&&a(function(){f(j)})})})}}}]),angular.module("driveoutApp.directives.lastngrepeat",[]).directive("lastngrepeat",["$timeout",function(a){return function(b,c){b.$last&&a(function(){b.$parent.$emit("lastngrepeatdone")})}}]),angular.module("driveoutApp.directives.unfccctrajectoriesadaptation",[]).directive("unfccctrajectoriesadaptation",function(){return{link:function(a,b){function c(){$("#vizContainer").highcharts({chart:{type:"heatmap",marginTop:10,borderColor:"#2F5B66",marginLeft:200,marginRight:10,height:$(".vizLegendZone").position().top-15,marginBottom:110},plotOptions:{heatmap:{borderColor:"#2F5B66",borderWidth:1}},title:{text:null},xAxis:{categories:["INC 11 - New York","COP 01 - Berlin Mandate","COP 02 - Geneva","COP 03 - Kyoto","COP 04 - Buenos Aires","COP 05 - Bonn","COP 06 - The Hague","COP 06bis - Bonn","COP 07 - Marrakech","COP 08 - New Delhi","COP 09 - Milan","COP 10 - Buenos Aires","COP 11 - Montreal","COP 12 - Nairobi","COP 13 - Bali","COP 14 - Poznan","COP 15 - Copenhagen","COP 16 - Cancun","COP 17 - Durban","COP 18 - Doha","COP 19 - Warsaw"]},yAxis:{categories:['<tspan class="adaptationUNFCCC">Adaptation Funding</tspan>','<tspan class="adaptationUNFCCC">Vulnerability & Adaptation Policy</tspan>','<tspan class="adaptationUNFCCC">Climate Change Impacts & Development</tspan>','<tspan class="mitigationUNFCCC">Emission Reduction Commitments</tspan>','<tspan class="mitigationUNFCCC">Reducing GHGs Emission</tspan>','<tspan class="mitigationUNFCCC">Technology Transfer & Energy</tspan>','<tspan class="mitigationUNFCCC">Clean Development Mechanism</tspan>','<tspan class="mitigationUNFCCC">Fuels & Transport</tspan>','<tspan class="mitigationUNFCCC">Land Use and Forestry</tspan>','<tspan class="mitigationUNFCCC">Compliance & Enforcement</tspan>','<tspan class="mitigationUNFCCC">Post-2012 Mitigation</tspan>','<tspan class="otherUNFCCC">Climate Expertise</tspan>'],title:null,labels:{useHTML:!1,textAlign:"right",formatter:function(){return-1!==this.value.search("adaptationUNFCCC")?this.value.replace(/class="adaptationUNFCCC"/,'style="color: '+h.adaptation+'"'):-1!==this.value.search("mitigationUNFCCC")?this.value.replace(/class="mitigationUNFCCC"/,'style="color: '+h.mitigation+'"'):-1!==this.value.search("otherUNFCCC")?this.value.replace(/class="otherUNFCCC"/,'style="color: '+h.other+'"'):this.value}}},colorAxis:{min:1,minColor:"#2F5B66",maxColor:"#FFFFFF"},legend:{enabled:!1,align:"right",layout:"vertical",margin:0,verticalAlign:"top",itemDistance:50,symbolHeight:280},tooltip:{formatter:function(){return"The topic <b>"+this.series.yAxis.categories[this.point.y]+"</b><br/> was the <b>"+d(this.point.value)+"</b> most visible topic<br/> in <b>"+this.series.xAxis.categories[this.point.x]+"</b> negotiations"}},series:[{name:"Sales per employee",borderWidth:1,data:[[0,0,1],[0,1,7],[0,2,10],[0,3,9],[0,4,2],[0,5,3],[0,6,8],[0,7,5],[0,8,6],[0,9,11],[0,10,11],[0,11,4],[1,0,3],[1,1,8],[1,2,5],[1,3,9],[1,4,2],[1,5,1],[1,6,11],[1,7,6],[1,8,7],[1,9,10],[1,10,11],[1,11,4],[2,0,2],[2,1,8],[2,2,7],[2,3,3],[2,4,4],[2,5,1],[2,6,9],[2,7,6],[2,8,9],[2,9,11],[2,10,11],[2,11,4],[3,0,5],[3,1,8],[3,2,7],[3,3,1],[3,4,2],[3,5,3],[3,6,8],[3,7,8],[3,8,4],[3,9,8],[3,10,12],[3,11,6],[4,0,4],[4,1,9],[4,2,7],[4,3,2],[4,4,7],[4,5,1],[4,6,3],[4,7,12],[4,8,5],[4,9,10],[4,10,11],[4,11,5],[5,0,3],[5,1,9],[5,2,11],[5,3,10],[5,4,7],[5,5,1],[5,6,4],[5,7,8],[5,8,5],[5,9,2],[5,10,12],[5,11,6],[6,0,1],[6,1,7],[6,2,10],[6,3,6],[6,4,8],[6,5,2],[6,6,4],[6,7,11],[6,8,3],[6,9,5],[6,10,12],[6,11,9],[7,0,2],[7,1,8],[7,2,10],[7,3,7],[7,4,6],[7,5,4],[7,6,3],[7,7,11],[7,8,1],[7,9,4],[7,10,12],[7,11,9],[8,0,2],[8,1,9],[8,2,8],[8,3,11],[8,4,6],[8,5,5],[8,6,1],[8,7,10],[8,8,3],[8,9,4],[8,10,12],[8,11,6],[9,0,1],[9,1,8],[9,2,7],[9,3,9],[9,4,3],[9,5,2],[9,6,4],[9,7,10],[9,8,5],[9,9,11],[9,10,12],[9,11,6],[10,0,1],[10,1,7],[10,2,7],[10,3,10],[10,4,6],[10,5,2],[10,6,4],[10,7,9],[10,8,3],[10,9,11],[10,10,11],[10,11,5],[11,0,2],[11,1,3],[11,2,6],[11,3,10],[11,4,7],[11,5,1],[11,6,5],[11,7,9],[11,8,4],[11,9,11],[11,10,11],[11,11,7],[12,0,1],[12,1,4],[12,2,8],[12,3,6],[12,4,5],[12,5,3],[12,6,2],[12,7,10],[12,8,7],[12,9,10],[12,10,12],[12,11,8],[13,0,1],[13,1,2],[13,2,11],[13,3,8],[13,4,5],[13,5,4],[13,6,2],[13,7,10],[13,8,7],[13,9,12],[13,10,9],[13,11,6],[14,0,1],[14,1,4],[14,2,10],[14,3,9],[14,4,8],[14,5,2],[14,6,5],[14,7,10],[14,8,7],[14,9,12],[14,10,3],[14,11,6],[15,0,1],[15,1,3],[15,2,9],[15,3,7],[15,4,10],[15,5,5],[15,6,4],[15,7,12],[15,8,6],[15,9,11],[15,10,2],[15,11,8],[16,0,2],[16,1,7],[16,2,9],[16,3,3],[16,4,6],[16,5,8],[16,6,5],[16,7,11],[16,8,4],[16,9,12],[16,10,1],[16,11,10],[17,0,2],[17,1,7],[17,2,8],[17,3,1],[17,4,9],[17,5,4],[17,6,5],[17,7,10],[17,8,6],[17,9,10],[17,10,3],[17,11,12],[18,0,1],[18,1,7],[18,2,8],[18,3,3],[18,4,10],[18,5,6],[18,6,5],[18,7,9],[18,8,4],[18,9,12],[18,10,2],[18,11,11],[19,0,3],[19,1,9],[19,2,4],[19,3,1],[19,4,7],[19,5,5],[19,6,6],[19,7,10],[19,8,8],[19,9,11],[19,10,2],[19,11,12],[20,0,3],[20,1,9],[20,2,4],[20,3,7],[20,4,8],[20,5,2],[20,6,5],[20,7,12],[20,8,6],[20,9,11],[20,10,1],[20,11,9]],dataLabels:{enabled:!1}}]}),$("#highcharts-0").css({position:"absolute",bottom:b.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"30px"})}function d(a){var b={1:"1st",2:"2nd",3:"3rd"};return void 0!==b[a]?b[a]:a+"th"}function e(a){var b=$(".highcharts-series rect");"number"==typeof a&&(a=[a]);for(var c=0;i>c;c++)for(var d=0;j>d;d++)-1===a.indexOf(d)?$(b[j*c+d%j]).css({opacity:"0.4"}):$(b[j*c+d%j]).css({opacity:"1"})}function f(){for(var a=$(".highcharts-series rect"),b=0;i>b;b++)for(var c=0;j>c;c++)$(a[j*b+c%j]).css({opacity:"1"})}function g(b){switch(a.index=b,b){case 0:f();break;case 1:e(0);break;case 2:e([1,2]);break;case 3:e(4);break;case 4:e([5,7]);break;case 5:e(8);break;case 6:e([0,6]);break;case 7:e(1)}}var h={adaptation:"#71b36a",mitigation:"#a93f23",other:"#4094b4"},i=21,j=12;c(),window.addEventListener("resize",function(){b.height()>0&&c(),g(a.index)}),a.index=0,a.$on("updateView",function(a,b){g(b)})}}}),angular.module("driveoutApp.directives.bricks",[]).directive("participationbychapters",function(){return{restrict:"EA",scope:{},link:function(a,b,c){var d=b.width(),e=new Bricks;e.load("contents/data/bricks-partByChapters/participations.json",function(){var a=$(".vizLegendZone").find("img").height(),c=d,f=$(".vizLegendZone").position().top-(0===a?46:30),g={top:40,bottom:15,left:27,right:17};e.drawViz("#bricksSvgContainer",{height:f,width:c,vizName:"viviz",margin:g}),$("#bricksSvgContainer svg").css({position:"absolute",bottom:b.height()-$(".vizLegendZone").position().top+(0===a?5:-5)+"px","margin-bottom":"15px"}),window.addEventListener("resize",function(){if(0!==b.height()){var a=$(".vizLegendZone").find("img").height(),c=b.width(),d=c,f=$(".vizLegendZone").position().top-(0===a?46:30),g={top:40,bottom:15,left:27,right:17};e.drawViz("#bricksSvgContainer",{height:f,width:d,vizName:"viviz",margin:g}),$("#bricksSvgContainer svg").css({position:"absolute",bottom:b.height()-$(".vizLegendZone").position().top+(0===a?5:-5)+"px","margin-bottom":"15px"})}})})}}}),angular.module("driveoutApp.directives.brickswmo",[]).directive("participationbychapterswmo",function(){return{restrict:"EA",scope:{},link:function(a,b,c){var d=b.width(),e=new BricksWMO;e.load("contents/data/bricks-partByChapters-WMO/participations.json",function(){var a=$(".vizLegendZone").find("img").height(),c=d,f=$(".vizLegendZone").position().top-(0===a?46:30),g={top:40,bottom:13,left:27,right:17};e.drawViz("#bricksSvgContainer",{height:f,width:c,vizName:"viviz",margin:g}),$("#bricksSvgContainer svg").css({position:"absolute",bottom:b.height()-$(".vizLegendZone").position().top+(0===a?5:-5)+"px","margin-bottom":"15px"}),window.addEventListener("resize",function(){if(0!==b.height()){var a=$(".vizLegendZone").find("img").height(),c=b.width(),d=c,f=$(".vizLegendZone").position().top-(0===a?46:30),g={top:40,bottom:13,left:27,right:17};e.drawViz("#bricksSvgContainer",{height:f,width:d,vizName:"viviz",margin:g}),$("#bricksSvgContainer svg").css({position:"absolute",bottom:b.height()-$(".vizLegendZone").position().top+(0===a?5:-5)+"px","margin-bottom":"15px"})}})})}}}),angular.module("driveoutApp.directives.gexfarthree",[]).directive("gexfarthree",function(){return{restrict:"EA",scope:{index:"="},link:function(a,b,c){function d(){var b=function(){var b=a.sigmaInstance.cameras[0];b.goTo({ratio:1,x:0,y:0})};$("#recenterButton").on("click",b);var c=function(){var b=a.sigmaInstance.cameras[0];b.goTo({ratio:b.ratio/b.settings("zoomingRatio")})};$("#zoomButton").on("click",c);var d=function(){var b=a.sigmaInstance.cameras[0];b.goTo({ratio:b.ratio*b.settings("zoomingRatio")})};$("#unzoomButton").on("click",d)}function e(a){$("#currentAR option").each(function(b,c){var d=b+1;d!==a?$(c).attr("selected",null):$(c).attr("selected",1)})}$("#sigma-container").css({position:"absolute",height:$(".vizLegendZone").position().top-25+"px",width:"100%",bottom:"30px","margin-bottom":"30px"}),a.drawn=!0,8===a.index?(void 0!==a.sigmaInstance&&a.sigmaInstance.kill(),drawGraph("sigma-container","currentAR","3",function(b){d(b),a.sigmaInstance=b}),e(3)):9===a.index&&(void 0!==a.sigmaInstance&&a.sigmaInstance.kill(),drawGraph("sigma-container","currentAR","4",function(b){d(b),a.sigmaInstance=b}),e(4)),a.$on("updateView",function(b,c){c=+c,9===a.index&&8===c?(void 0!==a.sigmaInstance&&a.sigmaInstance.kill(),drawGraph("sigma-container","currentAR","3",function(b){d(b),a.sigmaInstance=b}),e(3)):8===a.index&&9===c?(void 0!==a.sigmaInstance&&a.sigmaInstance.kill(),drawGraph("sigma-container","currentAR","4",function(b){d(b),a.sigmaInstance=b}),e(4)):8!==a.index&&9!==a.index&&void 0!==a.sigmaInstance&&a.sigmaInstance.kill()}),window.addEventListener("resize",function(){0!==b.height()&&($("#sigma-container").css({position:"absolute",height:$(".vizLegendZone").position().top-25+"px",width:"100%",bottom:"30px","margin-bottom":"30px"}),void 0!==a.sigmaInstance&&a.sigmaInstance.kill(),drawGraph("sigma-container","currentAR",$("#currentAR")[0].value,function(a){d(a)}))})}}}),angular.module("driveoutApp.directives.treemap",[]).directive("treemap",function(){return{restrict:"EA",scope:{},link:function(a,b,c){var d=(b.width(),b.height()),e=$(".vizLegendZone").height(),f=$(".vizLegendZone").find("img").height(),g=d-e-(0===f?55:0);drawTreemap(g),window.addEventListener("resize",function(){var a=(b.width(),b.height()),c=$(".vizLegendZone").height(),d=$(".vizLegendZone").find("img").height(),e=a-c-(0===d?55:0);drawTreemap(e)})}}}),angular.module("driveoutApp.directives.unfccctablefour",[]).directive("unfccctablefour",function(){return{templateUrl:"views/templates/UNFCCC_table_4.html",link:function(a,b){var c="List of the automatically extracted terms with their different forms",d="List of the manually selected terms with their forms and frequency";$("#tableDivContainer.scrollableOverlay").css({"max-height":b.height()-$("#buttonsTableContainer").height()-$(".tableHeader").height()-10+"px"}),window.addEventListener("resize",function(){$("#tableDivContainer.scrollableOverlay").css({"max-height":b.height()-$("#buttonsTableContainer").height()-$(".tableHeader").height()-10+"px"})}),$("#extractedTermsButton").on("click",function(){$("#tableExtracted").removeClass("displayNone"),$("#tableSelected").hasClass("displayNone")||$("#tableSelected").addClass("displayNone"),$("#extractedTermsButton").prop("disabled",!0),$("#selectedTermsButton").prop("disabled",!1),$(".vizLegendText h4 span").text()!==c&&$(".vizLegendText h4 span").text(c)}),$("#selectedTermsButton").on("click",function(){$("#tableSelected").removeClass("displayNone"),$("#extractedTermsButton").prop("disabled",!1),$("#selectedTermsButton").prop("disabled",!0),$("#tableExtracted").hasClass("displayNone")||$("#tableExtracted").addClass("displayNone"),$(".vizLegendText h4 span").text()!==d&&$(".vizLegendText h4 span").text(d)})}}}),angular.module("driveoutApp.directives.unfccctablefive",[]).directive("unfccctablefive",function(){return{templateUrl:"views/templates/UNFCCC_table_5.html",link:function(a,b){$("#tableDivContainer.scrollableOverlay").css({"max-height":b.height()-$(".tableHeader").height()-10+"px"}),window.addEventListener("resize",function(){$("#tableDivContainer.scrollableOverlay").css({"max-height":b.height()-$(".tableHeader").height()-10+"px"})})}}}),angular.module("driveoutApp.directives.diversityacrossar",[]).directive("diversityacrossar",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new StackedBarsRegionPartByARs,f=new StackedBarsRegionPartProportionByARs;e.load("contents/data/diversityAcrossARs/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),g=$(".vizLegendZone").find("img").height();console.log("legendHeight",d,"imageHeight",g);var h=a/2.1,i=b-d-(0===g?55:0),j={top:40,bottom:15,left:45,right:10};e.drawViz("#svgContainerLeft",{height:i,width:h,vizName:"viviz",margin:j}),$("#svgContainerLeft svg").css({position:"absolute",left:"0px",bottom:b-$(".vizLegendZone").position().top+(0===g?30:-5)+"px","margin-bottom":"15px"}),f.drawViz("#svgContainerRight",{height:i,width:h,vizName:"viviz",margin:j}),$("#svgContainerRight svg").css({position:"absolute",right:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===g?30:-5)+"px","margin-bottom":"15px"}),window.addEventListener("resize",function(){if(0!==c.width()){var a=$(".vizLegendZone").height(),b=c.width(),d=c.height(),f=$(".vizLegendZone").find("img").height(),g=b/2.1,h=d-a-(0===f?55:0),i={top:40,bottom:15,left:45,right:10};e.drawViz("#svgContainerLeft",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainerLeft svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===f?30:-5)+"px","margin-bottom":"15px"})}})})}),f.load("contents/data/diversityAcrossARs/participations.json",function(){a(function(){var a=$(".vizLegendZone").height(),b=$(".vizLegendZone").find("img").height(),d=elementWidth/2.1,e=elementHeight-a-(0===b?55:0),g={top:40,bottom:15,left:45,right:10};f.drawViz("#svgContainerRight",{height:e,width:d,vizName:"viviz",margin:g}),$("#svgContainerRight svg").css({position:"absolute",right:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===b?30:-5)+"px","margin-bottom":"15px"}),window.addEventListener("resize",function(){if(0!==c.width()){var a=$(".vizLegendZone").height(),b=c.width(),d=c.height(),e=$(".vizLegendZone").find("img").height(),g=b/2.1,h=d-a-(0===e?55:0),i={top:40,bottom:15,left:45,right:10};f.drawViz("#svgContainerRight",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainerRight svg").css({position:"absolute",right:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===e?30:-5)+"px","margin-bottom":"15px"})}})})})}}}]),angular.module("driveoutApp.directives.partratehisto",[]).directive("participationrateshisto",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=c.width(),f=c.height(),g=new PowerLawHistogram;g.load("contents/data/participationRatesHisto/participations.json",function(){a(function(){var a=$(".vizLegendZone").height();console.log("legendHeight",a);var b=e,d=f/1.1-a,h={top:40,bottom:45,left:40,right:25},i=15;g.drawChart("#containerNonBridge",{dataName:"dataNonBridge",title:"Non-bridge authors",height:d/2,width:b,margin:h,xOffset:i}),g.drawChart("#containerBridge",{dataName:"dataBridge",title:"Bridge authors",height:d/2,width:b,margin:h,xOffset:i}),$("#containerBridge svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),e=a,f=b/1.1-d,h={top:40,bottom:45,left:40,right:25};g.drawChart("#containerNonBridge",{dataName:"dataNonBridge",title:"Non-bridge authors",height:f/2,width:e,margin:h,xOffset:xOffset}),g.drawChart("#containerBridge",{dataName:"dataBridge",title:"Bridge authors",height:f/2,width:e,margin:h,xOffset:xOffset}),$("#containerBridge svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})}})})}}}]),angular.module("driveoutApp.directives.partratehistototal",[]).directive("participationrateshistototal",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new PowerLawHistogram;e.load("contents/data/participationRatesHisto/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),f=a,g=b/1.2-d,h={top:40,bottom:45,left:40,right:22};e.drawChart("#containerTotal",{dataName:"all",height:g,width:f,margin:h}),$("#containerTotal svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})})}),window.addEventListener("resize",function(){if(0!==c.height()){var a=c.width(),b=c.height();e.load("contents/data/participationRatesHisto/participations.json",function(){var d=$(".vizLegendZone").height(),f=a,g=b/1.2-d,h={top:40,bottom:45,left:40,right:22};e.drawChart("#containerTotal",{dataName:"all",height:g,width:f,margin:h}),$("#containerTotal svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})})}})}}}]),angular.module("driveoutApp.directives.roledistribstacked",[]).directive("roledistribstacked",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new StackedBars;e.load("contents/data/roleDistribStacked/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),f=a,g=b-d,h={top:40,bottom:27,left:a/5,right:a/10};e.drawViz("#svgContainer",{height:g,width:f,vizName:"viviz",margin:h}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=($(".vizLegendZone").height(),c.width()),b=c.height();e.load("contents/data/roleDistribStacked/participations.json",function(){var d=$(".vizLegendZone").height(),f=a,g=b-d,h={top:40,bottom:27,left:a/5,right:a/10};e.drawViz("#svgContainer",{height:g,width:f,vizName:"viviz",margin:h}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})})}})}}}]),angular.module("driveoutApp.directives.partcountrybridgenonbridge",[]).directive("partcountriesbridgenonbridge",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new countryPartBridgenonBridge;e.load("contents/data/partCountriesBridgeNonBridge/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=a,f=b/2.5,g={top:40,bottom:45,left:40,right:25},h=20;e.drawChart("#containerNonBridge",{dataName:"dataNonBridge",title:"Non-bridge authors",height:f,width:d,margin:g,xOffset:h}),e.drawChart("#containerBridge",{dataName:"dataBridge",title:"Bridge authors",height:f,width:d,margin:g,xOffset:h}),$("#containerBridge svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=c.width(),b=c.height(),d=a,f=b/2.5,g={top:40,bottom:45,left:40,right:25};e.drawChart("#containerNonBridge",{dataName:"dataNonBridge",title:"Non-bridge authors",height:f,width:d,margin:g,xOffset:xOffset}),e.drawChart("#containerBridge",{dataName:"dataBridge",title:"Bridge authors",height:f,width:d,margin:g,xOffset:xOffset}),$("#containerBridge svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})}})})}}}]),angular.module("driveoutApp.directives.partcountry9010",[]).directive("partcountriesninetypercent",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=c.width(),f=c.height(),g=new countryPart9010;g.load("contents/data/partCountries90-10/participations.json",function(){a(function(){var a=e,b=f/1.4,d={top:40,bottom:44,left:40,right:22};g.drawChart("#container",{title:"Non-bridge authors",height:b,width:a,margin:d}),$("#container svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=c.width(),b=c.height();g.load("contents/data/partCountries90-10/participations.json",function(){var d=a,e=b/1.4,f={top:40,bottom:44,left:40,right:22};g.drawChart("#container",{title:"Non-bridge authors",height:e,width:d,margin:f}),$("#container svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top-5+"px","margin-bottom":"15px"})})}})}}}]),angular.module("driveoutApp.directives.roleevolutiondiversity",[]).directive("roleevolutiondiversity",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new LineChartRoleOnly;e.load("contents/data/roleEvolutionDiversity/participations.json",function(){a(function(){var a=$(".vizLegendZone").find("img").height(),b=c.width(),d=c.height(),f=b,g=d/1.2,h={top:5,bottom:20,left:50,right:32};e.drawChart("#container",{height:g,width:f,margin:h}),$("#container svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===a?5:-5)+"px","margin-bottom":"15px"})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=$(".vizLegendZone").find("img").height(),b=c.width(),d=c.height(),f=b,g=d/1.2;e.drawChart("#container",{height:g,width:f,margin:margin}),$("#container svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===a?5:-5)+"px","margin-bottom":"15px"})}})})}}}]),angular.module("driveoutApp.directives.animatedlink",[]).directive("animatedlink",function(){return{link:function(a,b,c){b.on("mouseenter",function(){b.find(".frontSL").removeClass("hidden")}),b.on("mouseleave",function(){b.find(".frontSL").addClass("hidden")})}}}),angular.module("driveoutApp.directives.stackedwgsbyar",[]).directive("stackedwgsbyar",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new StackedBarsWGsByARs;e.load("contents/data/stacked-wgsByAR/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),f=$(".vizLegendZone").find("img").height(),g=a,h=b-d-(0===f?55:0),i={top:40,bottom:27,left:50,right:-19};e.drawViz("#svgContainer",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top+(0===f?25:-5)+"px","margin-bottom":"15px"})})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=$(".vizLegendZone").height(),b=c.width(),d=c.height(),f=$(".vizLegendZone").find("img").height(),g=b,h=d-a-(0===f?55:0),i={top:40,bottom:27,left:50,right:-19};e.drawViz("#svgContainer",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top+(0===f?25:-5)+"px","margin-bottom":"15px"})}})}}}]),angular.module("driveoutApp.directives.stackedwgsbyarcountryvstotal",[]).directive("stackedwgsbyarcountryvstotal",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new StackedBarsWGsByARsCountryVsTotal;e.load("contents/data/stacked-wgsByAR-countryVsTotal/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),f=$(".vizLegendZone").find("img").height(),g=a,h=b-d-(0===f?55:0),i={top:40,bottom:27,left:50,right:-18};e.drawViz("#svgContainer",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top+(0===f?25:-5)+"px","margin-bottom":"15px"})})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=($(".vizLegendZone").height(),$(".vizLegendZone").find("img").height()),b=c.width(),d=c.height();e.load("contents/data/stacked-wgsByAR-countryVsTotal/participations.json",function(){var f=$(".vizLegendZone").height(),g=b,h=d-f-(0===a?55:0),i={
top:40,bottom:27,left:50,right:-18};e.drawViz("#svgContainer",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top+(0===a?25:-5)+"px","margin-bottom":"15px"})})}})}}}]),angular.module("driveoutApp.directives.stackedwgsbyarcavsnonca",[]).directive("stackedwgsbyarcavsnonca",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new StackedBarsWGsByARsCaVsOthers;e.load("contents/data/stacked-wgsByAR-CAvsNonCA/participations.json",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").height(),f=$(".vizLegendZone").find("img").height(),g=a,h=b-d-(0===f?16:0),i={top:40,bottom:27,left:50,right:-18};e.drawViz("#svgContainer",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top+(0===f?5:-5)+"px","margin-bottom":"15px"})})}),window.addEventListener("resize",function(){if(0!==c.width()){var a=($(".vizLegendZone").height(),c.width()),b=c.height();e.load("contents/data/stacked-wgsByAR-CAvsNonCA/participations.json",function(){var d=$(".vizLegendZone").height(),f=$(".vizLegendZone").find("img").height(),g=a,h=b-d-(0===f?16:0),i={top:40,bottom:27,left:50,right:-18};e.drawViz("#svgContainer",{height:h,width:g,vizName:"viviz",margin:i}),$("#svgContainer svg").css({position:"absolute",bottom:c.height()-$(".vizLegendZone").position().top+(0===f?5:-5)+"px","margin-bottom":"15px"})})}})}}}]),angular.module("driveoutApp.directives.diversityacrossroles",[]).directive("diversityacrossroles",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=new LineChart;e.load("contents/data/diversityAcrossRoles/",function(){a(function(){var a=c.width(),b=c.height(),d=$(".vizLegendZone").find("img").height(),f=a,g=b/2.8,h={top:20,bottom:25,left:50,right:32},i={top:25,bottom:20,left:50,right:32};e.drawChart("#visualisation1",{title:"Participations as Contributing Authors (CA)",height:g,width:f,margin:h}),e.drawChart("#visualisation2",{title:"Participations in Roles of Responsibility (CLA/LA/RE)",dataName:"others",height:g,width:f,margin:i}),$("#visualisation1 svg").css({position:"absolute",left:"0px","margin-bottom":"15px"}),$("#visualisation2 svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===d?30:-5)+"px","margin-bottom":"15px"}),window.addEventListener("resize",function(){if(0!==c.height()){var a=$(".vizLegendZone").find("img").height(),b=c.width(),d=c.height(),f=b,g=d/2.8;e.drawChart("#visualisation1",{title:"Participations as Contributing Authors (CA)",height:g,width:f,margin:h}),e.drawChart("#visualisation2",{title:"Participations in Roles of Responsibility (CLA/LA/RE)",dataName:"others",height:g,width:f,margin:i}),$("#visualisation1 svg").css({position:"absolute",left:"0px","margin-bottom":"15px"}),$("#visualisation2 svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===a?30:-5)+"px","margin-bottom":"15px"})}})})})}}}]),angular.module("driveoutApp.directives.diversitybetweenwgs",[]).directive("diversitybetweenwgs",["$timeout",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=c.width(),f=c.height(),g=new StackedBarsRegionPartByWGs,h=new StackedBarsRegionPartProportionByWGs;g.load("contents/data/diversityBetweenWGs/participations.json",function(){h.load("contents/data/diversityBetweenWGs/participations.json",function(){a(function(){var a=$(".vizLegendZone").height(),b=$(".vizLegendZone").find("img").height(),d=e/2.1,i=f-a-(0===b?55:0),j={top:40,bottom:15,left:45,right:10},k={top:40,bottom:15,left:50,right:10};g.drawViz("#svgContainerLeft",{height:i,width:d,vizName:"viviz1",margin:j}),h.drawViz("#svgContainerRight",{height:i,width:d,vizName:"viviz2",margin:k}),$("#svgContainerLeft svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===b?30:-5)+"px","margin-bottom":"15px"}),$("#svgContainerRight svg").css({position:"absolute",right:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===b?30:-5)+"px","margin-bottom":"15px"}),window.addEventListener("resize",function(){if(0!==c.width()){var a=$(".vizLegendZone").height(),b=c.width(),d=c.height(),e=$(".vizLegendZone").find("img").height(),f=b/2.1,i=d-a-(0===e?55:0),j={top:40,bottom:15,left:45,right:10},k={top:40,bottom:15,left:50,right:10};g.drawViz("#svgContainerLeft",{height:i,width:f,vizName:"viviz1",margin:j}),h.drawViz("#svgContainerRight",{height:i,width:f,vizName:"viviz2",margin:k}),$("#svgContainerLeft svg").css({position:"absolute",left:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===e?30:-5)+"px","margin-bottom":"15px"}),$("#svgContainerRight svg").css({position:"absolute",right:"0px",bottom:c.height()-$(".vizLegendZone").position().top+(0===e?30:-5)+"px","margin-bottom":"15px"})}})})})})}}}]),angular.module("driveoutApp.directives.image",[]).directive("image",function(){return{scope:{ratiovertionhori:"="},link:function(a,b,c){function d(){.8*b.width()*a.ratiovertionhori<$(".vizLegendZone").position().top-30?b.find("img").css({"margin-left":(b.width()-.8*b.width())/2+"px",height:"","margin-bottom":$(".vizLegendZone").height()/1.5+"px",width:""}):b.find("img").height()===$(".vizLegendZone").position().top-30?b.find("img").css({"margin-bottom":$(".vizLegendZone").height()/1.5+"px","margin-left":(b.width()-b.find("img").width())/2+"px"}):b.find("img").css({height:$(".vizLegendZone").position().top-30+"px",width:($(".vizLegendZone").position().top-30)/a.ratiovertionhori+"px","margin-bottom":$(".vizLegendZone").height()/1.5+"px","margin-left":(b.width()-($(".vizLegendZone").position().top-30)/a.ratiovertionhori)/2+"px"})}d(),window.addEventListener("resize",function(){b.width()>0&&d()})}}}),angular.module("driveoutApp.directives.gexfinstitutions",[]).directive("gexfinstitutions",function(){return{restrict:"EA",scope:{index:"="},link:function(a,b,c){$("#sigma-container").css({position:"absolute",height:$(".vizLegendZone").position().top-25+"px",width:"100%",bottom:"30px","margin-bottom":"30px"}),drawGraphInstitutions("sigma-container",function(b){a.sigmaInstance=b;var c=function(){var a=b.cameras[0];a.goTo({ratio:1,x:0,y:0})};$("#recenterButton").on("click",c);var d=function(){var a=b.cameras[0];a.goTo({ratio:a.ratio/a.settings("zoomingRatio")})};$("#zoomButton").on("click",d);var e=function(){var a=b.cameras[0];a.goTo({ratio:a.ratio*a.settings("zoomingRatio")})};$("#unzoomButton").on("click",e)}),a.$on("updateView",function(b,c){3!==a.index&&void 0!==a.sigmaInstance&&a.sigmaInstance.kill()}),window.addEventListener("resize",function(){0!==b.height()&&($("#sigma-container").css({position:"absolute",height:$(".vizLegendZone").position().top-25+"px",width:"100%",bottom:"30px","margin-bottom":"30px"}),void 0!==a.sigmaInstance&&a.sigmaInstance.kill(),drawGraph("sigma-container","currentAR",$("#currentAR")[0].value))})}}}),angular.module("driveoutApp.directives.zeppelin",[]).filter("unsafe",["$sce",function(a){return a.trustAsHtml}]).directive("zeppelin",function(){return{templateUrl:"views/templates/zeppelin.html",scope:{sections:"=",index:"=",nextstory:"="},replace:!0,link:function(a,b,c){function d(){for(var b="",c=a.nextstory.content.menu,d=-1,e=window.location.hash.replace(/^#\/\w*\//,""),f=!1,g=0;g<c.length&&!f;g++)c[g].slug===e&&g!==c.length-1&&"countries-in-the-unfccc"!==c[g+1].slug?(f=!0,d=g+1):c[g].slug===e&&g!==c.length-1&&"countries-in-the-unfccc"===c[g+1].slug&&(f=!0,d=g+2);-1!==d&&(b="#"+a.nextstory.content.studyPath+"/"+c[d].slug),""!==b?($(".nextSLButton").prop("disabled",!1),$(".nextSLButton").attr("href",b),$(".nextSLButton").removeClass("disabledButton")):($(".nextSLButton").prop("disabled",!0),$(".nextSLButton").addClass("disabledButton")),$(".nextSLButton").css({width:($(".slider").width()-37)/2,"float":"right","margin-left":"10px"})}function e(){for(var b="",c=a.nextstory.content.menu,d=-1,e=window.location.hash.replace(/^#\/\w*\//,""),f=!1,g=0;g<c.length&&!f;g++)c[g].slug===e&&0!==g&&"countries-in-the-unfccc"!==c[g-1].slug&&"mapping-the-organizational-dynamics-of-the-ipcc"!==c[g-1].slug&&"mapping-adaptation-in-climate-negotiations"!==c[g-1].slug?(f=!0,d=g-1):c[g].slug===e&&0!==g&&"countries-in-the-unfccc"===c[g-1].slug&&(f=!0,d=g-2);-1!==d&&(b="#"+a.nextstory.content.studyPath+"/"+c[d].slug),""!==b?($(".prevSLButton").prop("disabled",!1),$(".prevSLButton").attr("href",b),$(".prevSLButton").removeClass("disabledButton")):($(".prevSLButton").prop("disabled",!0),$(".prevSLButton").addClass("disabledButton")),$(".prevSLButton").css({width:($(".slider").width()-37)/2,"float":"left","margin-left":"10px"})}b.on("click","[data-click]",function(b){a.$broadcast("focus",""+$(this).attr("data-click"))}),$(".slider").on("scroll",function(c){if(c.currentTarget.parentNode.parentNode.id===b[0].id){if(a.$parent.getScrollFlag())return a.$parent.automatedScroll=!1,!0;void 0===this.data?this.data={oldPosition:0,newPosition:c.currentTarget.scrollTop}:(this.data.oldPosition=this.data.newPosition,this.data.newPosition=c.currentTarget.scrollTop);var d,e=a.$parent.getCurrentIndex(),f=this.data.newPosition<this.data.oldPosition?e-1:e+1;if(d=f>e?a.$parent.next:a.$parent.previous,void 0!==b.find("#chapter_"+f)[0]){var g=!1,h=200,i=400;f>e?(d=a.$parent.next,g=b.find("#chapter_"+f)[0].offsetTop<this.scrollTop+i):e>f&&(d=a.$parent.previous,g=b.find("#chapter_"+e)[0].offsetTop>this.scrollTop+h),g&&(d(!0),a.$parent.$apply())}}}),d(),e(),window.addEventListener("resize",function(){d(),e()}),b.on("click","[noteIndex]",function(a){a.preventDefault();+$(this).attr("noteIndex")}),a.$parent.$watch(function(a){return a.height},function(a){b.css({height:a})})}}}),angular.module("driveoutApp.directives.topmenu",[]).directive("topMenu",function(){return{controller:"TopMenu",templateUrl:"views/templates/topMenu.html"}}),angular.module("driveoutApp.directives.footer",[]).directive("footer",function(){return{templateUrl:"views/templates/footer.html"}}),angular.module("driveoutApp.directives.subchapters",[]).directive("subchapters",function(){return{templateUrl:"views/templates/subchapters.html",controller:"SubchapterCtrl",link:function(a,b,c){a.elementClicked=function(b,c){switch(b){case"radio":a.bringTextTo(c);break;case"next":a.next(!1);break;case"previous":a.previous(!1)}}}}}),angular.module("driveoutApp.directives.section",[]).directive("sectiontoinsert",["$compile",function(a){return{replace:!0,link:function(b,c,d){b.$watch(d.sectionhtml,function(d){d=d.replace("&lt;","<").replace("&gt;",">"),c.html(d),a(c.contents())(b)})}}}]),angular.module("driveoutApp.filters",[]).filter("unsafeHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("driveoutApp.directives.enb",[]).directive("enbgraph",function(){return{restrict:"EA",scope:{gexf:"@"},link:function(a,b,c){var d=new ENBGraph(b[0]);d.load(a.gexf,null,function(){}),a.$on("focus",function(a,b){var c=b.split(",");c.length<2?d.focusOnNodeByLabel(c[0]):d.focusOnGroupByLabels(c)}),a.$on("updateView",function(a,b){switch(b){case 0:d.resetFocus();break;case 1:d.focusOnGroupByCluster(["Climate Expertise"]);break;case 2:d.focusOnGroupByCluster(["Reducing GHGs Emissions","Emission Reduction Commitments"]);break;case 3:d.focusOnGroupByCluster(["Technology transfer and energy","Fuels and transports"]);break;case 4:d.focusOnGroupByCluster(["Clean Development Mechanism"]);break;case 5:d.focusOnGroupByCluster(["Land use and forestry","Post-2012, mitigation and new funding pledges"]);break;case 6:d.focusOnGroupByCluster(["Climate change impacts and development","Vulnerability and adaptation policy","Adaptation funding"])}})}}}),angular.module("driveoutApp.directives.wenn",[]).directive("ipccwgvenn",function(){return{restrict:"EA",scope:{path:"="},link:function(a,b,c){var d,e,f;venn.load_data("contents/data/ipcc-wg-venn/authors-by-wg-by-ar-venn.json",function(){d="#"+b[0].getAttribute("id"),e=b.width(),f=b.height()-$(".vizLegendZone").height(),venn.plotGlobalAR(d,e,f)}),window.addEventListener("resize",function(){0!==b.width()&&venn.load_data("contents/data/ipcc-wg-venn/authors-by-wg-by-ar-venn.json",function(){d="#"+b[0].getAttribute("id"),e=b.width(),f=b.height()-50;var a=b[0];if(null!==b[0].lastChild){for(var c=b[0].lastChild.getAttribute("class");a.firstChild;)a.removeChild(a.firstChild);null!==c?(b.html(""),b[0].setAttribute("class",b[0].getAttribute("class").replace("fillHeight","fillComplement")),venn.plotGlobalAR(d,e,f)):(b.html(""),b[0].setAttribute("class",b[0].getAttribute("class").replace("fillComplement","fillHeight")),venn.plotAnnualARs(d,e,f))}})}),$($(".buttonFocus")[1]).prop("disabled",!0),a.$on("focus",function(a,c){"global"===c?(b.html(""),$($(".buttonFocus")[0]).prop("disabled",!1),$($(".buttonFocus")[1]).prop("disabled",!0),b[0].setAttribute("class",b[0].getAttribute("class").replace("fillHeight","fillComplement")),venn.plotGlobalAR(d,e,f)):"annual"===c&&($($(".buttonFocus")[1]).prop("disabled",!1),$($(".buttonFocus")[0]).prop("disabled",!0),b.html(""),f=b.height()-$(".vizLegendZone").height()-30,b[0].setAttribute("class",b[0].getAttribute("class").replace("fillComplement","fillHeight")),venn.plotAnnualARs(d,e,f))})}}}),angular.module("driveoutApp.directives.peoplelines",[]).directive("ipccpeoplelines",function(){return{restrict:"EA",scope:{},link:function(a,b,c){var d=9.5*b.width()/10,e="",f=document.querySelector("#lines-countries-choice"),g=document.querySelector("#lines-countries-order"),h=new IPCCPeopleLines;h.load_countries("contents/data/people-countries/countries.json",function(){h.listCountries.forEach(function(a){e+="<option "+(a===h.defaultCountry?'selected="selected" ':"")+'value="'+a+'">'+a+"</option>\n"}),f.innerHTML=e,f.onchange=g.onchange=function(a){h.load_country(f.value,"contents//data/people-countries",function(){h.draw_country("#lines-countries-viz",f.value,g.value,{width:d,lineHeight:15,lineMargin:{top:2,bottom:2,left:0,right:0}}),window.addEventListener("resize",function(){d=9.5*b.width()/10,h.draw_country("#lines-countries-viz",f.value,g.value,{width:d,lineHeight:15,lineMargin:{top:2,bottom:2,left:0,right:0}})})})},f.onchange()})}}}),angular.module("driveoutApp.directives.focus",[]).directive("focus",["HTMLFactory",function(a){return{scope:{src:"="},template:"<div></div>",restrict:"EA",link:function(b,c,d){a.get({path:b.src}).then(function(a){c.html(a.data.replace(/^.*<svg/,"<svg"))}),b.$on("focus",function(a,b){var c=b.split(",");c.length<2})}}}]);